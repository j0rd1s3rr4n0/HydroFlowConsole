<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>HydroConsole Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container py-4">
  <h1>Estado del Embalse</h1>
  <p>Usuario: {{ user }} ({{ role }})</p>

  <h2 class="mt-4">Lecturas de Sensores</h2>
  <ul>
    <li>Nivel de agua: {{ sensors['water_level'] }}</li>
    <li>Presi√≥n: {{ sensors['pressure'] }}</li>
    <li>Temperatura: {{ sensors['temperature'] }}</li>
  </ul>

  <p>Compuertas: <strong class="{{ 'text-danger' if gate_state=='open' else 'text-success' }}">{{ gate_state }}</strong></p>

  {% if role in ['engineer', 'admin'] %}
  <form action="{{ url_for('gate', action='open') }}" method="post" class="d-inline">
    <button class="btn btn-danger">Abrir</button>
  </form>
  <form action="{{ url_for('gate', action='close') }}" method="post" class="d-inline">
    <button class="btn btn-primary">Cerrar</button>
  </form>
  {% endif %}

  <form action="/dashboard" method="get" class="mt-3">
    <button class="btn btn-secondary">Forzar Lectura de Sensor</button>
  </form>
</body>
</html>
